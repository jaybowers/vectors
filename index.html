<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Vector Ship</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #eee; display: block; margin: 0 auto; }
    	html, body {
  			width:  100%;
  			height: 100%;
  			margin: 0px;
		}
    </style>
</head>
<body>

<canvas id="astors"></canvas>

<script type="text/javascript" src="maths.js"></script>
<script type="text/javascript" src="keys.js"></script>
<script type="text/javascript" src="vectors.js"></script>
<script type="text/javascript" src="objects.js"></script>
<script type="text/javascript" src="engine.js"></script>
<script>

function Debug()  {
	this.on = false;
	this.keydown = function (event) {
		if (event.key == 'd') {
			this.on = ! this.on;
		}
	}
	this.draw = function(ctx) {
		if (this.on) {
			ctx.fillText(
			   	  'canvas.height = ' + canvas.height
				+ ' canvas.width = ' + canvas.width,
			12, 12);
			callObjects(objects, o => 'debug' in o, o => o.debug(ctx));
		}
	} 
}

function init() {
}

var canvas = document.getElementById("astors");
canvas.width  = window.innerWidth;
canvas.height = window.innerHeight;

var debug = new Debug();

var objects = new Set();
objects.add(new Ship());
for (i = 0; i < 10; i++) {
	objects.add(new Asteroid());
}
//objects.add(new Asteroid());

var keys = new Keys(new Set([ ...objects, ...[ debug ] ]));

keys.init();
setInterval(run, 100);
setInterval(draw, 100);

</script>

</body>
</html>
